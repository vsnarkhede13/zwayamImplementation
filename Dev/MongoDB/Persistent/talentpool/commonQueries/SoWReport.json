{
  "_class": "com.zwayam.mongodb.models.CommonQueries",
  "companyId": "14977",
  "queryName": "SoWReport",
  "batchLimit": 5000,
  "query": "select a.id as 'Candidate ID', concat(a.first_name, '', a.last_name) as 'Name', a.source as 'Source', a.sub_source as 'Sub Source', a.referrer_email_id as 'Sub Source Email Id', ( Select distinct j.id from c3_job j where j.id = a.job_id limit 1 ) AS 'Indent Id', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'pocname' limit 1 ) as 'Name of Manager', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'poc' limit 1 ) as 'Hiring Manager Email id', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'joiningdate' limit 1 ) as 'SOW Start Date', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'contractdate' limit 1 ) as 'SOW End Date', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'vendorname' limit 1 ) as 'Vendor Name', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'vendoraddress' limit 1 ) as 'Vendor Location', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'aggrement' limit 1 ) as 'Agreement Date', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'agreedHourspm' limit 1 ) as 'Agreed # of hours per month', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'contractDuration' limit 1 ) as 'Contract duration in month', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'workhrs' limit 1 ) as 'Working Hours per week', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'currencyType' limit 1 ) as 'Currency Type', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'roc' limit 1 ) as 'Rate of Compensation', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'buyRateOffer' limit 1 ) as 'Buy Rate Offer', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'sellRate' limit 1 ) as 'Sell Rate offer', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'grossMargin' limit 1 ) as 'Gross Margin', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'tipay' limit 1 ) as 'Payment Terms (in Days)', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'wloc' limit 1 ) as 'Office Location', ( select fieldValue from c3_offernfitment_custom ofc where ofc.applicantId = a.id and fieldName = 'workAddress' limit 1 ) as 'Work Location', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Organization Unit' WHERE rfv.requisition_id = a.job_id LIMIT 1 ) AS 'Organization Unit', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Business Unit' WHERE rfv.requisition_id = a.job_id LIMIT 1 ) AS 'Business Unit', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Department Unit' WHERE rfv.requisition_id = a.job_id LIMIT 1 ) AS 'Department Unit' from c3_job_application a join c3_job j on a.job_id = j.id $conditions$ order by a.id desc",
  "conditions": "WHERE a.current_stage = 'Joining' and a.is_active = 1 AND a.job_id not like '-1' AND a.company_id = (select distinct companyId from UserRoleGroup where user_id= $userId$ and roleCode = 'Admin') ",
  "filterConditions": {
    "fromDate": "a.date_applied >= '$fromDate$' ",
    "toDate": "a.date_applied <= '$toDate$' ",
    "recruiter": "jcol.user_id in ($recruiter$) ",
    "location": "j.location in ($location$) ",
    "department": " j.deptFullCode in ($department$) ",
    "hiringManager": "j.hiring_manager in ($hiringManager$) ",
    "jobStatus": "j.status = '$jobStatus$'"
  },
  "joiningTables": {
    "c3_job_collaboration": "join c3_job_collaboration jcol on j.id = jcol.job_id"
  },
  "fileName": "SoWReport.csv",
  "displayName": "SoW Report (.csv)",
  "actions": null
}