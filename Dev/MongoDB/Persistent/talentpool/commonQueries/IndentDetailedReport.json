{
    "_class": "com.zwayam.mongodb.models.CommonQueries",
    "companyId": "14977",
    "queryName": "IndentDetailedReport",
    "batchLimit": 5000,
    "query": "SELECT DISTINCT j.job_code AS 'Job Code', j.reference_number AS 'Indent Id', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Requisition Grade' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Grade', j.skill_set AS 'Primary Skill', ( SELECT ( case when rfv.value like '%primal project%' then 'Bengaluru' else ( SUBSTRING_INDEX(SUBSTRING_INDEX(rfv.value, \",\", 2), \",\", -1) ) end ) FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Location' WHERE rfv.requisition_id = j.id ORDER BY rfv.id DESC LIMIT 1 ) AS 'Indent Location', ( case when ( ( d.departmentFullcode like 'persistent.Leadership.North America%' ) or ( d.departmentFullcode like 'persistent.Leadership.Latin America%' ) ) then SUBSTRING_INDEX( SUBSTRING_INDEX(d.departmentFullCode, \".\", 4), \".\", -1 ) when ( ( ( d.departmentFullcode not like 'persistent.Leadership.North America%' ) or ( d.departmentFullcode not like 'persistent.Leadership.Latin America%' ) ) and ( ( d.departmentFullcode like 'persistent.Leadership%' ) ) ) then SUBSTRING_INDEX( SUBSTRING_INDEX(d.departmentFullCode, \".\", 3), \".\", -1 ) when ( ( d.departmentFullcode like 'persistent.North America%' ) or ( d.departmentFullcode like 'persistent.Latin America%' ) ) then SUBSTRING_INDEX( SUBSTRING_INDEX(d.departmentFullCode, \".\", 3), \".\", -1 ) else substring( SUBSTRING_INDEX(d.departmentFullCode, \".\", 2), 12 ) end ) as 'Country', ( case when j.deptFullCode like '%North America.%' then 'North America' when j.deptFullCode like '%India.%' then 'India' when j.deptFullCode like '%Sri Lanka.%' then 'Sri Lanka' else 'RoW' end ) as 'Country Group', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Experience Level' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Experience Level', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Indent Classification' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Indent Classification', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Opportunity ID' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Opportunity ID', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Opportunity/Project Name' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Opportunity Name', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Client Name' WHERE rfv.requisition_id = j.id ORDER BY rfv.id DESC LIMIT 1 ) AS 'Customer Name/Account Name', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Organization Unit' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'OU', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Business Unit' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'BU', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Providing DU' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'DU', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'DU Delivery Partner' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'DU Delivery Partner', j.job_title as 'Required Designation', ( select u.username from c3_user u where j.hiring_manager = u.email_id limit 1 ) as 'Reporting Manager', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Hiring Manager' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Hiring Manager Email ID', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Client Interview Required' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Is client Interview Required', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'RAGBW Status' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'RAGBW Status', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Business Model' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Business Model', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'SubCon Allowed' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Is Subcon Allowed', ( SELECT DATE_FORMAT(rfv.value, '%d-%m-%Y') FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Allocation start date' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Allocation Start Date', ( SELECT DATE_FORMAT(rfv.value, '%d-%m-%Y') FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Allocation end date' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Allocation End Date', DATE_FORMAT(j.created_date, '%d-%m-%Y') AS 'Indent Creation date', ( SELECT DATE_FORMAT(rfv.value, '%d-%m-%Y') FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'External Marked Date' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'External Marked Date', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Allocation start date/Billing date' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Billing Start Date', timestampdiff( DAY, date_format(j.created_date, '%Y-%m-%d'), current_date() ) as 'Indent Aging', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Indent status at source' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'Indent Status (at Source) Value', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'Billing Status' WHERE rfv.requisition_id = j.id ORDER BY rfv.id DESC LIMIT 1 ) AS 'Billing Status',( select ( case when datediff(rfv.value, current_timestamp) < 0 then 'Backlog' when datediff(rfv.value, current_timestamp) between 0 and 35 then 'Rolling 5 weeks' when datediff(rfv.value, current_timestamp) > 35 then 'Future Months' end ) from c3_requisition_fields rf join c3_requisition_field_values rfv on rf.id = rfv.requisition_field_id and rf.field_name = 'Allocation start date/Billing date' where rfv.requisition_id = j.id limit 1 ) as 'Backlog/ Future Month Classification', ( SELECT DATE_FORMAT(rfv.value, '%d-%m-%Y') FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'BP Billing Date/TA ETA (yyyy-mm-dd)' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'BP Billing Date', ( SELECT DISTINCT group_concat(u.username) FROM c3_job_collaboration AS jc INNER JOIN c3_user AS u ON jc.emailId = u.email_id WHERE jc.job_id = j.id AND ( jc.role = 'Primary Recruiter' or jc.role = 'Recruiter' ) ) AS 'Primary Recruiter', ( SELECT DISTINCT group_concat(u.username) FROM c3_job_collaboration AS jc INNER JOIN c3_user AS u ON jc.emailId = u.email_id WHERE jc.job_id = j.id AND jc.role = 'Collaborator' ) AS 'Collaborator/TA Lead', ( SELECT rfv.value FROM c3_requisition_field_values rfv INNER JOIN c3_requisition_fields rf ON rfv.requisition_field_id = rf.id AND rf.field_name = 'TA Comments' WHERE rfv.requisition_id = j.id LIMIT 1 ) AS 'TA Comments', ( SELECT DATE_FORMAT(aa.actedOn, '%d-%m-%Y %r') FROM ApplyAction aa WHERE aa.actionCode = 'Send Offer' AND aa.applyId in ( select ja.id from c3_job_application ja where ja.job_id = j.id ORDER BY aa.id ) LIMIT 1 ) AS 'First Offer Sent Date', ( SELECT DATE_FORMAT(aa.actedOn, '%d-%m-%Y %r') FROM ApplyAction aa WHERE aa.actionCode = 'Accept Offer' AND aa.applyId in ( select ja.id from c3_job_application ja where ja.job_id = j.id ORDER BY aa.id ) LIMIT 1 ) AS 'First Offer Accepted Date', ( SELECT DATE_FORMAT(aa.actedOn, '%d-%m-%Y %r') FROM ApplyAction aa WHERE aa.actionCode = 'Reject Offer' AND aa.applyId in ( select ja.id from c3_job_application ja where ja.job_id = j.id ) ORDER BY aa.id LIMIT 1 ) AS 'Offer Rejected Date', ( SELECT DATE_FORMAT(aa.actedOn, '%d-%m-%Y %r') FROM ApplyAction aa WHERE aa.actionCode = 'Mark As Joined' AND aa.applyId in ( select ja.id from c3_job_application ja where ja.job_id = j.id ORDER BY aa.id ) LIMIT 1 ) AS 'First Applicant Joining Date', ( SELECT COUNT(candidateId) FROM c3_job_application WHERE company_id = $companyId$ AND is_active = 1 AND job_id = j.id ) AS 'No. of applicants in process', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'CareerSite' AND ja.company_id = $companyId$ ) AS 'Active Profiles - Career Site', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'EmployeeReferral' AND ja.company_id = $companyId$ ) AS 'Active Profiles - Employee Referral', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'Partner' AND ja.company_id = $companyId$ ) AS 'Active Profiles - Partner', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'RecruiterUpload' AND ja.company_id = $companyId$ ) AS 'Active Profiles - Recruiter', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.current_status = 'Pending' ) AS ' Pending for recruiter screening', ( SELECT COUNT(*) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.actionCode = 'HM Shortlist' AND j.id = c3_job_application.job_id AND c3_job_application.company_id = $companyId$ ) AS 'HM screening select (Overall) ', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.actionCode = 'HM Reject' AND j.id = c3_job_application.job_id AND c3_job_application.company_id = $companyId$ ) AS 'HM screening reject (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.actionCode = 'Conduct Assessment' AND j.id = c3_job_application.job_id AND c3_job_application.company_id = $companyId$ ) AS 'Assessment Conducted (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.actionCode = 'Schedule Assessment' AND j.id = c3_job_application.job_id AND c3_job_application.company_id = $companyId$ ) AS 'Assessment Scheduled (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.actionCode = 'Reject Assessment' AND j.id = c3_job_application.job_id AND c3_job_application.company_id = $companyId$ ) AS 'Assessment Rejected (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L1' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) AS 'L1 Interview Scheduled (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L1' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) AS 'L1 Interview Selected (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L1' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) AS 'L1 Interview Rejected (Overall)', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L1' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L1' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'L1 interview select percentage', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L1' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L1' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'L1 interview reject percentage', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L2' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) AS 'L2 Interview Scheduled (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L2' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) AS 'L2 Interview Selected (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L2' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) AS 'L2 Interview Rejected (Overall)', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L2' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L2' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'L2 interview select percentage', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L2' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L2' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'L2 interview reject percentage', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L3' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) AS 'L3 Interview Scheduled (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L3' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) AS 'L3 Interview Selected (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L3' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) AS 'L3 Interview Rejected (Overall)', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L3' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L3' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'L3 interview select percentage', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L3' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'L3' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'L3 interview reject percentage', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'Client' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) AS 'Client Interview Scheduled (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'Client' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) AS 'Client Interview Selected (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'Client' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) AS 'Client Interview Rejected (Overall)', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'Client' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'Client' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'Client interview select percentage', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'Client' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'Client' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'Client interview reject percentage', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'HR' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) AS 'HR Interview Scheduled (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'HR' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) AS 'HR Interview Selected (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'HR' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) AS 'HR Interview Rejected (Overall)', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'HR' AND ApplyAction.actionCode = 'Interview Select' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'HR' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'HR interview select percentage', ( ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'HR' AND ApplyAction.actionCode = 'Interview Reject' AND j.id = c3_job_application.job_id ) / ( SELECT COUNT(candidateId) FROM c3_job_application INNER JOIN ApplyAction ON ApplyAction.applyId = c3_job_application.id WHERE ApplyAction.subflowName = 'HR' AND ApplyAction.actionCode = 'Schedule Multipart Interview' AND j.id = c3_job_application.job_id ) * 100 ) as 'HR interview reject percentage', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja INNER JOIN ApplyAction AS aa ON aa.applyId = ja.id WHERE aa.actionCode = 'Send Offer' AND j.id = ja.job_id AND ja.company_id = $companyId$ ) AS 'Offers - Sent (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja INNER JOIN ApplyAction AS aa ON aa.applyId = ja.id WHERE aa.actionCode = 'Accept Offer' AND j.id = ja.job_id AND ja.company_id = $companyId$ ) AS 'Offers - Accepted (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja INNER JOIN ApplyAction AS aa ON aa.applyId = ja.id WHERE aa.actionCode = 'Reject Offer' AND j.id = ja.job_id AND ja.company_id = $companyId$ ) AS 'Offers - Rejected (Overall)', ( SELECT COUNT(candidateId) FROM c3_job_application WHERE source = 'CareerSite' AND job_id = j.id AND company_id = $companyId$ ) AS 'Source - Career Site', ( SELECT COUNT(candidateId) FROM c3_job_application WHERE source = 'EmployeeReferral' AND job_id = j.id AND company_id = $companyId$ ) AS 'Source - Employee Referral', ( SELECT COUNT(candidateId) FROM c3_job_application WHERE source = 'Partner' AND job_id = j.id AND company_id = $companyId$ ) AS 'Source - Partner', ( SELECT COUNT(candidateId) FROM c3_job_application WHERE source = 'RecruiterUpload' AND job_id = j.id AND company_id = $companyId$ ) AS 'Source - Recruiter', ( SELECT COUNT(candidateId) FROM c3_job_application WHERE job_id = j.id AND company_id = $companyId$ ) AS 'Profiles - Total', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'CareerSite' AND ja.current_status = 'HM Screening Pending' ) AS 'Screening Pending - Career Site', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'EmployeeReferral' AND ja.current_status = 'HM Screening Pending' ) AS 'Screening Pending - Employee Referral', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'Partner' AND ja.current_status = 'HM Screening Pending' ) AS 'Screening Pending - Partner', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.source = 'RecruiterUpload' AND ja.current_status = 'HM Screening Pending' ) AS 'Screening Pending - Recruiter Upload', ( SELECT COUNT(candidateId) FROM c3_job_application AS ja WHERE ja.job_id = j.id AND ja.is_active = 1 AND ja.current_status = 'HM Screening Pending' ) AS 'Screening Pending - Total' FROM c3_job j JOIN c3_job_application ja ON ja.job_id = j.id join c3_department d on j.department_id = d.id $conditions$",
    "conditions": "WHERE j.company_id = $companyId$ AND j.deptFullCode not like 'persistent.Leadership%' and j.is_requisition = 'Y' and d.departmentFullCode not like 'trash_department' and ( ( j.department_id IN ($departmentIds$) or j.id IN ( SELECT job_id FROM c3_job_collaboration WHERE user_id = $userId$ ) ) or j.company_id = ( SELECT companyId FROM UserRoleGroup WHERE user_id = $userId$ AND roleCode = 'Analytics Team' ) )",
    "filterConditions": {
        "fromDate": "j.created_date >= '$fromDate$' ",
        "toDate": "j.created_date <= '$toDate$' ",
        "department": " j.deptFullCode in ($department$) ",
        "location": "j.location in ($location$) ",
        "hiringManager": "j.hiring_manager in ($hiringManager$) ",
        "recruiter": "jcol.user_id in ($recruiter$) "
    },
    "joiningTables": {
        "c3_job_collaboration": " join c3_job_collaboration jcol on j.id = jcol.job_id "
    },
    "fileName": "IndentDetailedReport.csv",
    "displayName": "Indent Detailed Report (.csv)"
  }